<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta http-equiv="Content-Language" content="ru">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>(.gif) Graphics Interchange Format</title>
</head>
<body background="images/background_item.gif"><!--'"</title></head>-->
<script type="text/javascript">
////// Compete /////////////////////
__compete_code = '667f89f26d96c30e99728fe6a608804d';
(function () {
    var s = document.createElement('script'),
        d = document.getElementsByTagName('head')[0] ||
            document.getElementsByTagName('body')[0],
        t = 'https:' == document.location.protocol ? 
            'https://c.compete.com/bootstrap/' : 
            'http://c.compete.com/bootstrap/';
    s.src = t + __compete_code + '/bootstrap.js';
    s.type = 'text/javascript';
    s.async = 'async'; 
    if (d) { d.appendChild(s); }
})();


////// Quantcast  /////////////////////
function channValidator(chann) {
    return (typeof(chann) == 'string' && chann != '');
}

function lycosQuantcast(){
    var lb = "";
    if(typeof(cm_host) !== 'undefined' && channValidator(cm_host)){
        lb += cm_host.split('.')[0] + '.';
    }

    if(typeof(cm_taxid) !== 'undefined' && channValidator(cm_taxid)){
        lb += cm_taxid;
        lb = lb.replace('/','');
    } else {
        lb = lb.replace('.','');
    }
    return lb;
}

var _qevents = _qevents || [];

(function() {
    var elem = document.createElement('script');
    elem.src = (document.location.protocol == "https:" ? "https://secure" :"http://edge") + ".quantserve.com/quant.js";
    elem.async = true;
    elem.type = "text/javascript";
    var scpt = document.getElementsByTagName('script')[0];
    scpt.parentNode.insertBefore(elem, scpt);
})();

_qevents.push({
    qacct:"p-6eQegedn62bSo",
    labels:lycosQuantcast()
});

////// OwnerIQ  /////////////////////
var __oiq_pct = 50;
if( __oiq_pct>=100 || Math.floor(Math.random()*100/(100-__oiq_pct)) > 0 ) {
    var _oiqq = _oiqq || [];
    _oiqq.push(['oiq_addPageBrand', 'Lycos']);
    _oiqq.push(['oiq_addPageCat', 'Internet > Websites']);
    _oiqq.push(['oiq_addPageLifecycle', 'Intend']);
    _oiqq.push(['oiq_doTag']);

    (function() {
        var oiq = document.createElement('script'); oiq.type = 'text/javascript'; oiq.async = true;
        oiq.src = document.location.protocol + '//px.owneriq.net/stas/s/lycosn.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(oiq, s);
    })();
}



/////// Google Analytics ////////////
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-21402695-19']);
_gaq.push(['_setDomainName', 'tripod.com']);
_gaq.push(['_setCustomVar', 1, 'member_name', 'faydoc', 3]);
_gaq.push(['_trackPageview']);
(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();


/////// Lycos Initialization ////////////
function getReferrer() {
    // Reads the referrer out of the cookie, if available.
    var all= this.document.cookie;
    if (all== '') return false;
    var cookie_name = 'REFERRER=';
    var start = all.lastIndexOf(cookie_name);
    if (start == -1) return false;  // referrer URL not found.
    start += cookie_name.length;
    var end = all.indexOf(';', start);
    if (end == -1) end = all.length;
    return all.substring(start, end);
}
function getQuery() {
    // Get the referrer search query from cookie, if available.
    var rfr = getReferrer();
    if (rfr == '') return false;
    var q = extractQuery(rfr, 'yahoo.com', 'p=');
    if (q) return q;
    q = extractQuery(rfr, '', 'q=');
    return q ? q : "";
}
function extractQuery(full, site, q_param) {
    var start = full.lastIndexOf(site);
    if (start == -1) return false;
    start = full.lastIndexOf(q_param);
    if (start == -1) return false;
    start += q_param.length;
    var end = full.indexOf('&', start);
    if (end == -1) end = full.length;
    return unescape(full.substring(start, end)).split(" ").join("+");
}

function generateHref(atag, template){
    atag.href=template.replace('_MYURL_', window.location.href.replace('http://', '')).replace('_MYTITLE_', 'Check%20out%20this%20Tripod%20Member%20site!'); 
}


var lycos_ad = Array();
var lycos_onload_timer;

var cm_role = "live";
var cm_host = "tripod.lycos.com";
var cm_taxid = "/memberembedded";
var tripod_member_name = "faydoc";
var tripod_member_page = "faydoc/formats/gif.htm";
var tripod_ratings_hash = "1372261282:63c9f2638ff60865218d6ffb4b446a90";

var lycos_ad_category = {"find_what":"reliv.com"};

var lycos_ad_remote_addr = "99.159.74.223";
var lycos_ad_www_server = "www.tripod.lycos.com";
var lycos_ad_track_small = "http://members.tripod.com/adm/img/common/ot_smallframe.gif?rand=499881";
var lycos_ad_track_served = "http://members.tripod.com/adm/img/common/ot_adserved.gif?rand=499881";
var lycos_search_query = getQuery();


////// Criteo /////////////////////
var cto_conf = { a:true, i: "294", c:"img", kw: "" } ;
(function (){
    var c = document.createElement("script"); c.type = "text/javascript"; c.async = true;
    c.src = "http://members.tripod.com/adm/partner/criteo_ld_kw.js";
    var s = document.getElementsByTagName("body")[0]; s.appendChild(c);
})(); 

</script>

<script type="text/javascript" src="http://scripts.lycos.com/catman/init.js"></script>
<script type="text/javascript"> 

(function(isV) {
    if (!isV) {
        return;
    }

    //this.lycos_search_query = lycos_get_search_referrer();
    var adMgr = new AdManager();
    var lycos_prod_set = adMgr.chooseProductSet();
    var slots = ["leaderboard", "leaderboard2", "toolbar_image", "toolbar_text", "smallbox", "top_promo", "footer2"];
    var adCat = this.lycos_ad_category;
    adMgr.setForcedParam('page', (adCat && adCat.dmoz) ? adCat.dmoz : 'member');

    if (this.lycos_search_query) {
        adMgr.setForcedParam("keyword", this.lycos_search_query);
    } 
    else if (adCat && adCat.find_what) {
        adMgr.setForcedParam('keyword', adCat.find_what);
    }

    for (var s in slots) {
        var slot = slots[s];
        if (adMgr.isSlotAvailable(slot)) {
            this.lycos_ad[slot] = adMgr.getSlot(slot);
        }
    }

    adMgr.renderHeader();
    adMgr.renderFooter();
}((function() {
    var w = 0, h = 0, minimumThreshold = 300;
    if (top == self) {
        return true;
    }

    if (typeof(window.innerWidth) == 'number' ) {
        w = window.innerWidth;
        h = window.innerHeight;
    }
    else if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) {
        w = document.documentElement.clientWidth;
        h = document.documentElement.clientHeight;
    }
    else if (document.body && (document.body.clientWidth || document.body.clientHeight)) {
        w = document.body.clientWidth;
        h = document.body.clientHeight;
    }

    return ((w > minimumThreshold) && (h > minimumThreshold));
}())));
    
window.onload = function() {
    var f = document.getElementById("FooterAd");
    var b = document.getElementsByTagName("body")[0];
    b.appendChild(f);
    f.style.display = "block";
    document.getElementById('lycosFooterAdiFrame').src = '/adm/ad/footerAd.iframe.html';


    // DOM Injection Ad
    (function(isTrellix) {
        var e = document.createElement('iframe');
        e.style.border = '0';
        e.style.margin = 0;
        e.style.display = 'block';
        e.style.cssFloat = 'right';
        e.style.height = '254px';
        e.style.overflow = 'hidden';
        e.style.padding = 0;
        e.style.width = '300px';

        var getCommentNodes = function(regexPattern) {
            var nodes = {};
            var nodesA = [];
            var preferredNodesList = ['a', 'c', 'b'];

            (function getNodesThatHaveComments(n, pattern) {
                if (n.hasChildNodes()) {
                    if (n.tagName === 'IFRAME') {
                        return false;
                    }
                    for (var i = 0; i < n.childNodes.length; i++) {
                        if ((n.childNodes[i].nodeType === 8) && (pattern.test(n.childNodes[i].nodeValue))) {
                            var areaName = pattern.exec(n.childNodes[i].nodeValue)[1];
                            nodes[areaName] = n;
                        }
                        else if (n.childNodes[i].nodeType === 1) {
                            getNodesThatHaveComments(n.childNodes[i], pattern);
                        }
                    }
                }
            }(document.body, regexPattern));

            for (var i in preferredNodesList) {
                if (nodes[preferredNodesList[i]]) {
                    if (nodes[preferredNodesList[i]].parentNode.parentNode.parentNode.parentNode) {
                        nodesA.push(nodes[preferredNodesList[i]].parentNode.parentNode.parentNode.parentNode);
                    }
                }
            }

            return nodesA;
        }

        var properNode = null;
        var areaNodes = getCommentNodes(new RegExp('^area Type="area_(\\w+)"'));
        for (var i = 0; i < areaNodes.length; i++) {
            var a = parseInt(getComputedStyle(areaNodes[i]).width);
            if ((a >= 300) && (a <= 400)) {
                properNode = areaNodes[i];
                break;
            }
        }

        if ((isTrellix) && (properNode)) {
            e.src = '/adm/ad/injectAd.iframe.html';
            properNode.insertBefore(e, properNode.firstChild);
        }
        else {
            e.src = '/adm/ad/sliderAd.iframe.html';
            var sliderBlock = document.getElementById('lyslider-adblock-wrapper');
            var sliderHolder = document.getElementById('lyslider-adblock-holder');
            var sliderClose = document.getElementById('lyslider-adblock-close');
            sliderBlock.style.display = 'block';

            sliderClose.onclick = function() {
                sliderBlock.parentNode.removeChild(sliderBlock);
                return false;
            }

            var iframeOnload = function() {
                setTimeout((function sliiide() {
                    var s = (window.getComputedStyle) ? parseInt(getComputedStyle(sliderHolder).right) : parseInt(sliderHolder.currentStyle.right);
                    if (s <= 0) {
                        sliderHolder.style.right = (s + 6) + 'px';
                        setTimeout(sliiide, 10);
                    }
                    else {
                        sliderHolder.style.right = '0px';
                        sliderClose.style.display = 'block';
                    }
                }), 1000);
            }

            if (e.attachEvent) {
                e.attachEvent('onload', iframeOnload);
            }
            else {
                e.addEventListener('load', iframeOnload, false);
            }

            sliderHolder.insertBefore(e, sliderHolder.firstChild);
        }
    }(document.isTrellix));

}



</script>
<style>
	#body .adCenterClass{margin:0 auto}
</style>

<div id="tb_container" style="background:#DFDCCF; border-bottom:1px solid #393939; position:relative; z-index:999999999!important">
    <div id="tb_ad" class="adCenterClass" style="display:block!important; overflow:hidden; width:916px;">
    <a href="http://adtrack.ministerial5.com/clicknew/?a=637394" title="build your own website at Tripod.com" style="float:left; width:186px; border:0">
    	<img src="http://ly.lygo.com/ly/tpSite/images/freeAd2.jpg" alt="Make your own free website on Tripod.com" style="border:0; display:block" />
    </a> 
        <div id="ad_container" style="display:block!important; float:left; width:728px ">
        <script type="text/javascript">document.write(lycos_ad['leaderboard']);</script>
        </div>
    </div>
</div>

<!-- ///////////////////////////////////// -->
<div id="lyslider-adblock-wrapper" style="display:none; height:300px; overflow:hidden; position:absolute; right:0; top:150px; width:320px; z-index:99999999; ">
<div id="lyslider-adblock-holder" style="background-color:#888; height:250px; margin-bottom:25px; padding:4px; position:absolute; right:-320px; top:10px; width:300px; ">
<a id="lyslider-adblock-close" href="#" style="background-color:#222; bottom:-19px; color:#fff; display:block; font:10px Arial, Helvetica, Sans-serif; padding:4px; position:absolute; right:0; text-decoration:none; z-index:9999999999">Close Ad</a>
</div>
</div>


<div id="FooterAd" style="background:#DFDCCF; border-top:1px solid #393939; clear:both; display:none; width:100%!important; position:relative; z-index:999999!important; height:90px!important"> 
	<div class="adCenterClass" style="display:block!important; overflow:hidden; width:916px;">
	<a href="http://adtrack.ministerial5.com/clicknew/?a=637394" title="build your own website at Tripod.com" style="float:left; display:block; width:186px; border:0">
    	<img src="http://ly.lygo.com/ly/tpSite/images/freeAd2.jpg" alt="Make your own free website on Tripod.com" style="border:0; display:block; " />
    </a> 
        <div id="footerAd_container" style="display:block!important; float:left; width:728px">
        <iframe id="lycosFooterAdiFrame" style="border:0; display:block; float:left; height:96px; overflow:hidden; padding:0; width:750px"></iframe>
        <!-- <script type="text/javascript">document.write(lycos_ad['leaderboard2']);</script> -->
        </div>
	</div>
</div>
<noscript>
 <img src="http://members.tripod.com/adm/img/common/ot_noscript.gif?rand=499881" alt="" width="1" height="1" />
 <!-- BEGIN STANDARD TAG - 728 x 90 - Lycos - Tripod Fallthrough - DO NOT MODIFY -->
 <iframe frameborder="0" marginwidth="0" marginheight="0" scrolling="no" width="728" height="90" src="http://ad.yieldmanager.com/st?ad_type=iframe&amp;ad_size=728x90&amp;section=209094"></iframe>
 <!-- END TAG -->
</noscript>

<!-- Start Ybrant -->
<img src="http://ad.yieldmanager.com/pixel?id=1901600&t=2" width="1" height="1" />
<!--   End Ybrant -->

<!-- Start Datonics -->
<script type="text/javascript" src="http://ads.pro-market.net/ads/scripts/site-132783.js"></script>
<!--   End Datonics -->

<!-- Start Chango -->
<script type="text/javascript">
    var __cho__ = {"pid":1694};
    (function() {
        var c = document.createElement('script');
        c.type = 'text/javascript';
        c.async = true;
        c.src = document.location.protocol + '//cc.chango.com/static/o.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(c, s);
    })();
</script>
<!--   End Chango -->


<table border=3 cellpadding=10 cellspacing=5>
<tr>
<td><!--webbot bot="Navigation" S-Type="global" S-Orientation="horizontal"
  S-Rendering="graphics" B-Include-Home="FALSE" B-Include-Up="TRUE" U-Page="/W:/doc/formats/gif.htm"
  S-Target startspan --><nobr>[&nbsp;<a href="index.htm" target="">Up</a>&nbsp;]</nobr> <nobr>[&nbsp;<a href="http://www.fay.naverex.kiev.ua/docs/index.htm" target="">Docs&nbsp;Home</a>&nbsp;]</nobr><!--webbot bot="Navigation" endspan i-checksum="63939" -->
</td>
<td>
<h1 align="center"><!--webbot bot="Navigation" S-Type="banner"
S-Rendering="graphics" S-Orientation B-Include-Home B-Include-Up U-Page="/W:/doc/formats/gif.htm" S-Target startspan
-->(.gif) Graphics Interchange Format<!--webbot bot="Navigation" endspan i-checksum="20674"
-->
</h1>
</td>
<td><!--webbot bot="Navigation" S-Type="arrows" S-Orientation="horizontal"
  S-Rendering="graphics" B-Include-Home="FALSE" B-Include-Up="FALSE" U-Page="/W:/doc/formats/gif.htm"
  S-Target startspan --><nobr>[&nbsp;<a href="mp3.htm" target="">Back</a>&nbsp;]</nobr> <nobr>[&nbsp;<a href="jpg.htm" target="">Next</a>&nbsp;]</nobr><!--webbot bot="Navigation" endspan i-checksum="27004" -->
</td>
</tr>
</table>
<hr>
<h3><a href="#Introduction">
Введение</a><br>
<a href="#General_File_Format">
Общий формат файла</a><br>
<a href="#GIF_ID">
Идентификатор GIF</a><br>
<a href="#Screen_Descriptor">
Дескриптор экрана</a><br>
<a href="#Global_Colortable">
Глобальная таблица цветов</a><br>
<a href="#Image_Descriptor">
Дескриптор изображения</a><br>
<a href="#Local_Colortable">
Локальная таблица цветов</a><br>
<a href="#Raster_Data">
Растровый данные</a><br>
<a href="#GIF_Terminator">
Терминатор GIF<br>
</a><a href="#GIF_ExBlock">Расширенный блок GIF</a><br>
<a href="#AppA">
Приложение A - Глоссарий</a><br>
<a href="#AppB">
Приложение B - Взаимодействующие
последовательности</a><br>
<a href="#AppC">
Приложение C - Упаковка и сжатие изображения</a><br>
<a href="#AppD">
Приложение D - Обработка нескольких
изображений</a></h3>
<hr>
<h1><a name="Introduction"></a>Введение</h1>
'GIF' (tm) - это стандарт фирмы CompuServe для определения
растровых цветных изображений. Этот формат
позволяет высвечивать
на различном оборудовании графические высококачественные
изображения с большим разрешением и подразумевает механизм обмена
и высвечивания изображений. Описанный в настоящем документе
формат
изображений был разработан для поддержки настоящей и будущей
технологии обработки изображений и будет в дальнейшем служить
основой для будущих графических продуктов CompuServe.<br>
<br>
Главная задача настоящего документа состоит в том, чтобы
снабдить программистов необходимой технической
информацией для
написания декодеров и кодировщиков GIF. Поэтому в документе
используется терминология связанная с общими вопросами графики и
программирования.
<p>Первый раздел настоящего документа описывает
формат данных
GIF и его компоненты в приложении к декодерам
GIF, вне зависимости
от того являются ли они отдельной программой или частью пакета
связи. Приложение B относится к декодерам являющимися частью
пакетов связи и описывает протокол, необходимый для входа и
существования режима GIF и отвечает на ряд специфических вопросов.
Глоссарий в <a href="#AppA"> приложении A</a> определяет некоторые термины,
использованные в документе. <a href="#AppC"> Приложение C
</a> дает подробное объяснение
того, как сами графические изображения пакуются в виде
последовательности байтов.</p>
<h1><a name="General_File_Format"></a>
Общий формат файла</h1>
<p><img border=0 src="images/gif1.gif" width=481 height=695></p>
<h1><a name="GIF_ID"></a>
Идентификатор GIF</h1>
<p> Наличие в начале файла специальной "подписи" указывает, что
последующие данные являются действительно
потоком данных изображения в формате GIF. Эта "подпись" состоит из следующих
шести символов:<br>
G I F 8 7 a</p>
<p>Три последних символа '87a' могут рассматриваться как номер версии
для данного конкретного определения GIF и будут использоваться в
дальнейшем в качестве ссылки на документ с описанием GIF в
зависимости от номера версии.<br>
</p>
<h1><a name="Screen_Descriptor"></a>
Дескриптор экрана</h1>
<p> Дескриптор экрана описывает общие параметры для всех
последующих изображений в формате GIF. Он определяет
размеры пространства изображения или требуемого логического экрана,
существование информации о таблице цветов и "глубине" экрана. Эта
информация запоминается в виде серии 8-битовых байтов, как
показано ниже.</p>
<table border=1 cellpadding=5 cellspacing=0>
<tr>
<td colspan="8" align=center><b>Биты</b></td>
<td rowspan="2"><b>Номер байта</b></td>
<td rowspan="2"><b>Описание</b></td>
</tr>
<tr>
<td align=center><b>7</b></td>
<td align=center><b>6</b></td>
<td align=center><b>5</b></td>
<td align=center><b>4</b></td>
<td align=center><b>3</b></td>
<td align=center><b>2</b></td>
<td align=center><b>1</b></td>
<td align=center><b>0</b></td>
</tr>
<tr>
<td colspan="8" rowspan="2" align=center>Ширина экрана</td>
<td align=center><b>1</b></td>
<td rowspan="2">Ширина растра в пикселях (сначала LSB)</td>
</tr>
<tr>
<td align=center><b>2</b></td>
</tr>
<tr>
<td colspan="8" rowspan="2" align=center>Высота экрана</td>
<td align=center><b>3</b></td>
<td rowspan="2">Высота растра в пикселях (сначала LSB)</td>
</tr>
<tr>
<td align=center><b>4</b></td>
</tr>
<tr>
<td align=center>M</td>
<td colspan="3" align=center>cr</td>
<td align=center>0</td>
<td colspan="3" align=center>pixel</td>
<td align=center><b>5</b></td>
<td>M = 1, За дескриптором следует глобальная
таблица цветов<br>
cr + 1 = число битов цветового разрешения<br>
pixel + 1 = число бит/пиксель в изображении</td>
</tr>
<tr>
<td colspan="8" align=center>
<p align=center>background</td>
<td align=center><b>6</b></td>
<td>фон = цветовой индекс фона экрана (цвет определяется из глобальной таблицы
цветов или из таблицы по умолчанию)</td>
</tr>
<tr>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center><b>7</b></td>
<td></td>
</tr>
</table>
<p> Ширина и высота логического экрана могут быть больше размеров
физического экрана. Способ высвечивания изображений больших, чем
размеры физического экрана зависит от реализации и может
использовать преимущества конкретного оборудования (например, окна
скроллинга в Macintosh scrolling windows). В противном случае
изображение будет усечено по краям экрана.</p>
<p>Значение 'pixel' также определяет число цветов в изображении.
Диапазон значений 'pixel' составляет от 0 до 7, что
соответствует от 1 до 8 битам. Это транслируется в диапазон от 2 (черно-белые
изображения) до 256 цветов. Бит 3 в байте 5 зарезервирован для
будущих определений и должен быть нулевым.</p>
<h1><a name="Global_Colortable"></a>
Глобальная таблица цветов</h1>
<p> Глобальная таблица цветов является необязательной и
рекомендуется для изображений, где требуется точная
передача цветов. На существование этой таблицы указывает поле 'M' в байте 5
дескриптора экрана. Цветовая таблица может быть также связана с
каждым изображением в GIF-файле, что будет описано позже. Однако
обычно эта глобальная таблица будет использоваться, из-за
ограничений, существующих в настоящее время в доступном
оборудовании. Флаг 'M' в дескрипторе конкретного изображения
обычно равен 0. Если глобальная таблица цветов
присутствует, ее определение следует непосредственно за дескриптором экрана. Число
элементов цветовой таблицы, следующей за описателем экрана равно
<b><code>2**(число бит/пиксел)</code></b>, причем каждый элемент состоит из трех
байтов, значения которых описывают соответственно относительную
интенсивность красного, зеленого и синего цветов. Структура блока
цветовой таблицы:</p>
<table border=1 cellpadding=5 cellspacing=0>
<tr>
<td colspan="8" align=center><b>Биты</b></td>
<td rowspan="2"><b>Номер байта</b></td>
<td rowspan="2"><b>Описание</b></td>
</tr>
<tr>
<td align=center><b>7</b></td>
<td align=center><b>6</b></td>
<td align=center><b>5</b></td>
<td align=center><b>4</b></td>
<td align=center><b>3</b></td>
<td align=center><b>2</b></td>
<td align=center><b>1</b></td>
<td align=center><b>0</b></td>
</tr>
<tr>
<td align=center colspan="8">интенсивность красного</td>
<td align=center>
<p align=center><b>1</b></td>
<td>Значение красного для цвета 0</td>
</tr>
<tr>
<td align=center colspan="8">интенсивность зеленого</td>
<td align=center><b>2</b></td>
<td>Значение зеленого для цвета 0</td>
</tr>
<tr>
<td align=center colspan="8">интенсивность синего</td>
<td align=center><b>3</b></td>
<td>Значение синего для цвета 0</td>
</tr>
<tr>
<td align=center colspan="8">интенсивность красного</td>
<td align=center><b>4</b></td>
<td>Значение красного для цвета 1</td>
</tr>
<tr>
<td align=center colspan="8">интенсивность зеленого</td>
<td align=center><b>5</b></td>
<td>Значение зеленого для цвета 1</td>
</tr>
<tr>
<td align=center colspan="8">интенсивность синего</td>
<td align=center><b>6</b></td>
<td>Значение синего для цвета 1</td>
</tr>
<tr>
<td align=center colspan="8">...</td>
<td align=center><b>...</b></td>
<td>(Продолжение для остальных цветов)</td>
</tr>
</table>
<p> Получаемое значение каждого пикселя при высвечивании
изображения будет соответствовать ближайшему
доступному цвету из цветовой таблицы дисплея. Цветовые компоненты представляют собой
значение относительной интенсивности от нулевой (0) до полной
(255). Белый цвет может быть представлен как (255,255,255), черный
как (0,0,0) и желтый как (180,180,0). При высвечивании на
дисплеях, которые поддерживают менее 8 бит на цветовую компоненту,
используются старшие биты. При создании элементов цветовой
таблицы GIF на аппаратуре, поддерживающей менее 8 бит на
компоненту, значение аппаратной компоненты должно быть
конвертировано в 8-битный формат по следующей формуле:<br>
<code>
<b><code>&lt;значение_в_таблице> = &lt;компонента>*255/(2**&lt;число_бит> -1)</code></b></p>
</code>
<p>Это обеспечивает точный перевод цветов для всех дисплеев. В
случае создания изображения GIF на аппаратуре без
возможности цветовой палитры, должна быть создана фиксированная палитра на
основе доступных для данного оборудования цветов. Если указано
отсутствие глобальной таблицы цветов, цветовая таблица по
умолчанию генерируется внутренним образом так, что каждый цветовой
индекс равен аппаратному цветовому индексу modulo
&lt;n&gt;, где &lt;n> - число доступных цветов на оборудовании.
</p>
<h1><a name="Image_Descriptor"></a>Дескриптор изображения
</h1>
<p> Дескриптор изображения определяет действительное расположение
и размеры последующего изображения внутри
пространства, определенного в дескрипторе экрана. Также определяются флаги,
указывающие на присутствие локальной таблицы для поиска цветов и
определения последовательности высвечивания пикселов. Каждый
дескриптор изображения начинается с символа-разделителя
изображений. Роль разделителя изображений состоит
просто в синхронизации при входе в дескриптор изображения. Это желательно,
если GIF-файл состоит более, чем из одного изображения. Этот
символ определен как шестнадцатеричное 0x2C или ',' (запятая). Как
только этот символ встречается между изображениями,
непосредственно за ним следует дескриптор изображения.</p>
<p>Любой символ, встреченный между концом предыдущего
изображения и символом-разделителем изображения
игнорируется. Это позволит при последующих модификациях GIF допускать присутствие
нескольких форматов и правильно игнорировать их старыми
декодерами.<br>
</p>
<table border=1 cellpadding=5 cellspacing=0>
<tr>
<td colspan="8" align=center><b>Биты</b></td>
<td rowspan="2"><b>Номер байта</b></td>
<td rowspan="2"><b>Описание</b></td>
</tr>
<tr>
<td align=center><b>7</b></td>
<td align=center><b>6</b></td>
<td align=center><b>5</b></td>
<td align=center><b>4</b></td>
<td align=center><b>3</b></td>
<td align=center><b>2</b></td>
<td align=center><b>1</b></td>
<td align=center><b>0</b></td>
</tr>
<tr>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center>1</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center><b>1</b></td>
<td>',' - Символ-разделитель изображения</td>
</tr>
<tr>
<td align=center colspan="8" rowspan="2">Левый край</td>
<td align=center><b>2</b></td>
<td rowspan="2">Начало изображения в пикселях относительно левого края экрана (сначала LSB)</td>
</tr>
<tr>
<td align=center><b>3</b></td>
</tr>
<tr>
<td align=center colspan="8" rowspan="2">Верхний край</td>
<td align=center><b>4</b></td>
<td rowspan="2">Начало изображения в пикселях относительно
верхнего края экрана (сначала LSB)</td>
</tr>
<tr>
<td align=center><b>5</b></td>
</tr>
<tr>
<td align=center colspan="8" rowspan="2">Ширина</td>
<td align=center><b>6</b></td>
<td rowspan="2">Ширина изображения в пикселях (сначала LSB)</td>
</tr>
<tr>
<td align=center><b>7</b></td>
</tr>
<tr>
<td align=center colspan="8" rowspan="2">Высота</td>
<td align=center><b>8</b></td>
<td rowspan="2">Высота изображения в пикселях (сначала LSB)</td>
</tr>
<tr>
<td align=center><b>9</b></td>
</tr>
<tr>
<td align=center>M</td>
<td align=center>I</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center colspan="3">pixel</td>
<td align=center><b>10</b></td>
<td>
<table border=0 cellpadding=5 cellspacing=0>
<tr>
<td>M = 0</td>
<td>Использовать глобальную таблицу цветов, игнорировать 'pixel'</td>
</tr>
<tr>
<td>M = 1</td>
<td>Далее следует локальная таблица цветов, использовать 'pixel'</td>
</tr>
<tr>
<td>I = 0</td>
<td>Изображение отформатировано в последовательном порядке</td>
</tr>
<tr>
<td>I = 1</td>
<td>Изображение отформатировано в порядке переплетения</td>
</tr>
<tr>
<td>pixel + 1</td>
<td>число бит на пиксель в данном изображении</td>
</tr>
</table>
</td>
</tr>
</table>
<p> Описание положения и размеров экрана должно быть находиться
внутри матрицы, определенной в дескрипторе
экрана. С другой стороны, нет необходимости, чтобы изображение полностью заполняло
весь экран.<br>
</p>
<h1><a name="Local_Colortable"></a>
Локальная таблица цветов</h1>
<p> Локальная таблица цветов необязательна и определена здесь для
будущего использования. Если установлен бит
'M' байта 10 в дескрипторе изображения, то вслед за дескриптором изображения
следует локальная таблица цветов, которая относится только к
последующему изображению. После обработки изображения цветовую
таблицу следует привести к той, которая была определена после
дескриптора экрана. Заметим, что поле 'pixel' байта 10 в
дескрипторе изображения используется только в том случае, если
указана локальная таблица цветов. Она определяет не только
размер пикселя (число битов в нем), но число элементов последующей
цветовой таблицы. Число битов на пиксель
также следует восстановить к тому значению, которое было определено в
дескрипторе экрана, после того, как закончится обработка
изображения.</p>
<h1><a name="Raster_Data"></a>Растровый данные</h1>
<p> Формат самого изображения определен как серия значений
номеров пикселов, которые образуют изображение.
Пиксели запоминаются слева направо последовательно по строкам изображения.
По умолчанию строки записываются последовательно, сверху вниз. В
том случае, если установлен бит 'I' в байте 10 дескриптора
изображения, то порядок строк при записи изображения соответствует
четырех проходному процессу. При первом проходе записывается
каждая 8-ая строка, начиная с верхней строки окна изображения. При
втором проходе записывается каждая 8-ая строка, начиная с пятой
строки сверху. На третьем проходе записывается каждая 4-ая
строка, начиная с третьей строки окна. Четвертый проход завершает
изображение, записывая каждую вторую строку,
начиная со второй строки с сверху. Ниже приведено графическое описание этого
процесса.</p>
<table border=1 cellpadding=5 cellspacing=0>
<tr>
<td><b>Страница</b></td>
<td><b>Проход № 1</b></td>
<td><b>Проход № 2</b></td>
<td><b>Проход № 3</b></td>
<td><b>Проход № 4</b></td>
<td><b>Результат</b></td>
</tr>
<tr>
<td align=right><b>1</b></td>
<td align=center>**1a**</td>
<td align=center></td>
<td align=center></td>
<td align=center></td>
<td align=center>**1a**</td>
</tr>
<tr>
<td align=right><b>2</b></td>
<td align=center></td>
<td align=center></td>
<td align=center></td>
<td align=center>**4a**</td>
<td align=center>**4a**</td>
</tr>
<tr>
<td align=right><b>3</b></td>
<td align=center></td>
<td align=center></td>
<td align=center>**3a**</td>
<td align=center></td>
<td align=center>**3a**</td>
</tr>
<tr>
<td align=right><b>4</b></td>
<td align=center></td>
<td align=center></td>
<td align=center></td>
<td align=center>**4b**</td>
<td align=center>**4b**</td>
</tr>
<tr>
<td align=right><b>5</b></td>
<td align=center></td>
<td align=center>**2a**</td>
<td align=center></td>
<td align=center></td>
<td align=center>**2a**</td>
</tr>
<tr>
<td align=right><b>6</b></td>
<td align=center></td>
<td align=center></td>
<td align=center></td>
<td align=center>**4c**</td>
<td align=center>**4c**</td>
</tr>
<tr>
<td align=right><b>7</b></td>
<td align=center></td>
<td align=center></td>
<td align=center>**3b**</td>
<td align=center></td>
<td align=center>**3b**</td>
</tr>
<tr>
<td align=right><b>8</b></td>
<td align=center>**1d**</td>
<td align=center></td>
<td align=center></td>
<td align=center></td>
<td align=center>**1d**</td>
</tr>
<tr>
<td align=right><b>9</b></td>
<td align=center></td>
<td align=center></td>
<td align=center></td>
<td align=center>**4e**</td>
<td align=center>**4e**</td>
</tr>
<tr>
<td align=right><b>10</b></td>
<td align=center></td>
<td align=center></td>
<td align=center>**3c**</td>
<td align=center></td>
<td align=center>**3c**</td>
</tr>
<tr>
<td align=right><b>11</b></td>
<td align=center></td>
<td align=center></td>
<td align=center></td>
<td align=center>**4f**</td>
<td align=center>**4f**</td>
</tr>
<tr>
<td align=right><b>12</b></td>
<td align=center></td>
<td align=center>**2b**</td>
<td align=center></td>
<td align=center></td>
<td align=center>**2b**</td>
</tr>
<tr>
<td colspan="6">
<p align=center><b>...</b></td>
</tr>
</table>
<p align=left> Значения пикселов изображения обрабатываются как цветовые
индексы, указывающие на существующую таблицу
цветов. В результате получается цветовое значение из таблицы, которое реально
воспроизводится на экране. Эти серии цветовых индексов, число
которых равно <code><b>ширине_изображения*высоту_изображения</b></code>, пропускаются
через поток данных изображения GIF по одному значению на пиксел,
сжимаются и упаковываются в соответствии с
версией алгоритма сжатия LZW, как это определено в
<a href="#AppC"> Приложении C</a>.<br>
</p>
<h1 align=left><a name="GIF_Terminator"></a>
Терминатор GIF</h1>
<p align=left> Для того, чтобы обеспечить синхронизацию с окончанием файла
изображения GIF, декодер GIF должен обрабатывать окончание режима
GIF по символу шестнадцатеричное 0x3B или ';', найденному после
окончания обработки изображения. По соглашению декодирующие
программы должны делать паузу и ждать действий,
указывающих, что пользователь готов к продолжению. Это может быть возврат каретки,
введенный с клавиатуры или щелчок кнопкой мыши. Для интерактивных
приложений эти действия пользователя должны быть переданы в
ядро программы как перевод каретки, для того, чтобы вычислительный
процесс мог продолжаться. Обычно декодирующая программа покидает
графический режим и возвращается к предыдущему процессу.</p>
<h1 align=left><a name="GIF_ExBlock"></a>Расширенный блок GIF</h1>
<p align=left> Для того, чтобы обеспечить аккуратное расширение определения
GIF, необходим механизм для определения упаковки внутри потока
данных GIF. Указанное расширение было определено и документировано
CompuServe для того, чтобы предусмотреть управляемый способ
усовершенствований.</p>
<p align=left>Расширенный блок GIF пакуется способом, похожим на тот,
который использовался для растровых данных, но не
сжимается.</p>
<p align=left>Основная структура блока:</p>
<table border=1 cellpadding=5 cellspacing=0>
<tr>
<td colspan="8" align=center><b>Биты</b></td>
<td rowspan="2"><b>Номер байта</b></td>
<td rowspan="2"><b>Описание</b></td>
</tr>
<tr>
<td align=center><b>7</b></td>
<td align=center><b>6</b></td>
<td align=center><b>5</b></td>
<td align=center><b>4</b></td>
<td align=center><b>3</b></td>
<td align=center><b>2</b></td>
<td align=center><b>1</b></td>
<td align=center><b>0</b></td>
</tr>
<tr>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>1</td>
<td align=center><b>1</b></td>
<td>'!' - Идентификатор расширенного блока</td>
</tr>
<tr>
<td align=center colspan="8">функциональный код</td>
<td align=center><b>2</b></td>
<td>Расширенный функциональный код (0-255)</td>
</tr>
<tr>
<td align=center colspan="8">байт-счетчик</td>
<td align=center colspan="2" rowspan="2">Повторяется
столько раз, сколько необходимо</td>
</tr>
<tr>
<td align=center colspan="8">функциональные. байты
данных</td>
</tr>
<tr>
<td align=center colspan="10">...</td>
</tr>
<tr>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center colspan="2">нулевой байт-счетчик (терминатор блока)</td>
</tr>
</table>
<p align=left> Расширенный блок GIF может непосредственно предшествовать
дескриптору изображения или находиться перед терминатором
GIF.</p>
<p align=left>Все декодеры GIF должны быть способны распознавать
присутствие расширенного блока GIF и затем читать его,
если они не могут обработать функциональный код. Это гарантирует, что старые
декодеры смогут обрабатывать файлы изображений GIF в будущем, хотя
и без дополнительных функциональных возможностей.<br>
</p>
<h1 align=left><a name="AppA"></a>Приложение A - Глоссарий</h1>
<table border=0 cellpadding=10 cellspacing=0>
<tr>
<td valign=top>Пиксель</td>
<td>Наименьший элемент графического изображения. Обычно соответствует отдельной точке на
графическом экране. Разрешение изображения обычно задается в пикселах. Например, одним из довольно стандартных экранных графических форматов является 320 пикселов по горизонтали на 200
по вертикали. Каждый пиксель может быть окрашен одним из нескольких цветов в зависимости от возможностей графического оборудования.</td>
</tr>
<tr>
<td valign=top>Растр</td>
<td>Горизонтальные уровни пикселов, представляющие одну строку изображения. Типичный метод
порождения изображения, поскольку большинство образцов видеоборудования ориентировано на
наиболее эффективную работу именно таким образом.</td>
</tr>
<tr>
<td valign=top>LSB</td>
<td>Сокращение от Least Significant Byte ( младший по значению байт). Ссылается на соглашение для двух
байтов числового значения, согласно которому младший по значению байт предшествует более
старшему. Такое соглашение типично для микрокомпьютеров.</td>
</tr>
<tr>
<td valign=top>Таблица цветов</td>
<td>Список определений для каждого цвета, используемый в изображениях GIF. Желаемые цвета
конвертируются в доступные цвета с помощью таблицы, причем по входным цветовым индексам
изображения образуются выходные цветовые индексы оборудования. Если для изображения GIF
указана таблица цветов, то цвета выходных пикселов будут изменены на основе используемого
оборудования и его способности соответствовать заданным цветам.</td>
</tr>
<tr>
<td valign=top>Переплетение</td>
<td>Метод высвечивания изображений GIF, при котором
совершаются несколько проходов с выводом разнесенных строк растра, что дает возможность визуализации общего содержания всего изображения до того, как обработаны все данные.</td>
</tr>
<tr>
<td valign=top>B Протокол</td>
<td>Свободно распространяемый протокол передачи файлов с исправлением ошибок,
разработанный CompuServe и реализованный в продукте VIDTEX фирмы CompuServe. Такой
механизм обнаружения ошибок будет использован при передаче изображений GIF для интерактивных приложений.</td>
</tr>
<tr>
<td valign=top>LZW</td>
<td>Совершенный алгоритм сжатия данных, основанный на работе, сделанной Lempel-Ziv и
Welch, который обеспечивает возможность высокоэффективного однопроходного кодирования и
декодирования. Это позволяет одновременно раскрывать и высвечивать изображения.
Исходная статья, в которой был описан указанный метод:<br>
Terry A. Welch, "A Technique for High Performance Data Compression", IEEE Computer, vol 17 no 6 (June 1984)<br>
<br>
Этот базовый алгоритм также используется в свободно распространяемых утилитах ARC для сжатия файлов. Адаптация алгоритма
LZW, выполненная CompuServe для GIF описана в<br>
<a href="#AppC"> приложении C</a>.</td>
</tr>
</table>
<h1 align=left><a name="AppB"></a>Приложение B - Взаимодействующие
последовательности</h1>
<h3 align=left>Последовательность обменов gif для
интерактивной среды</h3>
<p align=left>Для управления на интерактивной линии связи между<br>
отправителем и получателем GIF определена следующая<br>
последовательность действий. Эта последовательность не применяется<br>
в приложениях, включающих загрузку статических GIF-файлов и не<br>
является частью GIF-файлов.</p>
<h3 align=left>Запрос возможностей gif - Gif Capabilities
Enquiry</h3>
<p align=left>Последовательность GCE идет из головного процесса и требует,
чтобы интерактивный декодер GIF вернул ответное сообщение, которое
определяет графические параметры для декодирования. Оно включает
возвращаемую информацию о доступных размерах экрана, числе битов
на цвет и поддерживаемом количестве цветов.
Esc-последовательность для GCE определена следующим образом:<br>
<b><code> ESC [ > 0 g </code></b>(g в нижнем регистре, пробелы вставлены для ясности)<br>
<b><code> (0x1B 0x5B 0x3E 0x30 0x67)</code></b></p>
<h3 align=left>Сообщение возможностей gif - Gif
Capabilities Response</h3>
<p align=left>Ответное сообщение о возможностях GIF возвращается
интерактивным декодером и определяет возможности
дисплея декодера
для всех графических режимов, поддерживаемых математическим
обеспечением. Заметьте, что оно может также включать графический
принтер, а не только экран монитора. Общий формат этого сообщения:<br>
<br>
<b><code>#version;protocol{;dev,width,height,color-bits,color-res}... &lt;CR></code></b>
</p>
<table border=1 cellpadding=10 cellspacing=0>
<tr>
<td>
<b>
'#'</b></td>
<td> GCR символ-идентификатор (Знак номера)
version - номер версии формата GIF; из начально '87a'</td>
</tr>
<tr>
<td>
<b>protocol='0'</b></td>
<td> Протокол end-to-end не поддерживается декодером.
Передача данных ведется непосредственным 8-битным
потоком.</td>
</tr>
<tr>
<td>
<b>
protocol='1'</b></td>
<td> Может поддерживать протокол коррекции ошибок при
передаче данных от прямого хозяина на дисплей.</td>
</tr>
<tr>
<td>
<b>
dev = '0'</b></td>
<td> Далее следуют параметры экрана</td>
</tr>
<tr>
<td>
<b>
dev = '1'</b></td>
<td> Далее следуют параметры принтера</td>
</tr>
<tr>
<td>
<b>
width</b></td>
<td> Максимальная ширина дисплея в пикселях</td>
</tr>
<tr>
<td>
<b>
height</b></td>
<td> Максимальная высота дисплея в пикселях</td>
</tr>
<tr>
<td>
<b>
color-bits</b></td>
<td> Поддерживаемое число битов на пиксель.
Следовательно, поддерживаемое число цветов
<b><code>2**color-bits.</code></b></td>
</tr>
<tr>
<td>
<b>
color-res</b></td>
<td> Число битов на компоненту цвета, поддерживаемое
аппаратной цветовой палитрой. Если color-res равен
'0', таблица аппаратной палитры недоступна.</td>
</tr>
</table>
<p align=left>
Заметьте, что все значения в GCR возвращаются в десятичных
числах ASCII и сообщение заканчивается символом "Возврат каретки".
</p>
<p align=left>Следующее GCR-сообщение описывает три стандартных режима
EGA с конфигурацией без принтера, поток данных GIF может
обрабатываться в рамках протокола с коррекцией ошибок:<br>
<b><code>#87a;1 ;0,320,200,4,0 ;0,640,200,2,2 ;0,640,350,4,2&lt;CR></code></b>
</p>
<h3 align=left>Ввод графического режима GIF
</h3>
<p align=left>Две последовательности, определенные ниже вызывают для работы
интерактивный декодер GIF. Между ними существует только
единственное отличие. Оно заключается в выборе различной среды
вывода. Эти последовательности:
<br>
<b><code>ESC [ > 1 g</code></b> Высветить изображение GIF на экране
<b><code>(0x1B 0x5B 0x3E 0x31 0x67)</code></b><br>
<b><code>ESC [ > 2 g</code></b>Выдать изображение непосредственно на
присоединенный графический принтер. Допускается
<b><code>(0x1B 0x5B 0x3E 0x32 0x67)</code></b>
</p>
<p align=left>
Заметьте, что символ 'g', заканчивающий каждую
последовательность находится в нижнем регистре.
</p>
<h3 align=left>Интерактивная среда</h3>
Подразумеваемой средой при пересылке данных об изображении
GIF в интерактивных приложения является полностью 8-битный поток
данных от "хозяина" к получателю. Об установке 8-битного способа
пересылки данных при связи обычно должна заботиться головная
прикладная программа. Однако программа-получатель,
поддерживающая
декодер GIF в линии связи, должна быть способна принимать и
передавать декодеру GIF все 256 возможных кодов 8-битных данных.
<h1 align=left><a name="AppC"></a>Приложение C - Упаковка и сжатие изображения</h1>
Поток растровых данных, которые описывают действительное
выходное изображение может быть представлен в следующем виде:
<table border=1 cellpadding=5 cellspacing=0>
<tr>
<td colspan="8" align=center><b>Биты</b></td>
<td rowspan="2"><b>Описание</b></td>
</tr>
<tr>
<td align=center><b>7</b></td>
<td align=center><b>6</b></td>
<td align=center><b>5</b></td>
<td align=center><b>4</b></td>
<td align=center><b>3</b></td>
<td align=center><b>2</b></td>
<td align=center><b>1</b></td>
<td align=center><b>0</b></td>
</tr>
<tr>
<td align=center colspan="8">код размера</td>
<td></td>
</tr>
<tr>
<td align=center colspan="8">байт-счетчик блока</td>
<td rowspan="2">Повторяется столько раз, сколько
необходимо</td>
</tr>
<tr>
<td align=center colspan="8">байт данных</td>
</tr>
<tr>
<td align=center colspan="8">...</td>
<td></td>
</tr>
<tr>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td align=center>0</td>
<td>нулевой байт-счетчик (заканчивает поток данных)</td>
</tr>
</table>
<p>
Преобразование изображения из серии значений пикселов к
передаваемому или запоминаемому потоку символов
включает несколько шагов. Вкратце эти шаги состоят в следующем:
<ol>
<li>
<p align=left>Установка кода размера - Определяет число битов, необходимое для представления действительных данных.</li>
<li>
<p align=left>Сжатие данных - Сжатие серии пикселов изображения в серию
кодов сжатия.</li>
<li>
<p align=left>Построение серии байтов - берет серию кодов сжатия и преобразует их в строку 8-битных данных.</li>
<li>
<p align=left>Упаковка байтов - Упаковка набора байтов в блоки, которым
предшествует символ-счетчик и вывод.
</li>
</ol>
<h3 align=left>Установка кода размера</h3>
<p align=left> Первый байт в потоке растровых данных GIF имеет значение,
указывающее минимальное число битов, необходимое
для представления для представления действительных значений пикселов. Как правило
оно будет таким же, что и число битов цвета. Однако из-за
некоторых ограничений алгоритма черно-белые изображения, которые
имеют один бит цвета, должны иметь код размера, равный 2. Такое
значение кода размера подразумевает также, что коды сжатия
должны быть на один бит длиннее.</p>
<h3 align=left>Сжатие</h3>
<p align=left> Алгоритм LZW преобразует серию значений данных в серию кодов,
которые могут быть самими значениями или
кодами, описывающими серию значений. Если использовать аналогию с текстовыми символами,
то выходные коды состоят из символов и кодов, которые описывают
цепочки символов.</p>
<p align=left>LZW-алгоритм, использованный в GIF алгоритмически
соответствует стандартному алгоритму LZW со следующими отличиями:</p>
<ol>
<li>
<p align=left>Определен специальный код очистки, который сбрасывает все параметры сжатия/раскрытия и таблицы в
исходное состояние. Значение этого кода равно
<b><code>2**&lt;код размера&gt;</code></b>. Например, если код размера равен 4
(изображение имеет 4 бита на пиксель), код очистки равен 16 (двоичное 10000). Код очистки может появляться в
любом месте потока данных и, следовательно, требуется, чтобы LZW-алгоритм обрабатывал последующие коды так,
как будто бы начался новый поток данных. Кодировщик должен выводить код очистки в качестве первого кода в
каждом потоке данных изображения.</li>
<li>
<p align=left>Определен код конца информации, который явно указывает на конец потока данных изображения. Если
встретится такой код, LZW-обработка прекращается. Этот код должен быть последним кодом, формируемым
кодировщиком для изображения. Значение этого кода равно
<b> <code>&lt;Код_очистки&gt; + 1,</code></b>.</li>
<li>
<p align=left>Значение первого доступного кода сжатия равно
<b><code> &lt;Код_очистки&gt; + 2</code></b>.</li>
<li>
<p align=left>Выходные коды имеют переменную длину, начиная от
<b><code>&lt;код_размера> + 1</code></b> битов на код, до 12 битов на код. Тем
самым максимальное значение кода определяется равным 4095 (шестнадцатеричное
FFF). Как только значение LZW-кода может превысить текущую длину кода, длина кода увеличивается на единицу. Паковщик и распаковщик
этих кодов должны изменяться, чтобы соответствовать новой длине кода.</li>
</ol>
<h3 align=left>Построение 8-битных байтов</h3>
<p align=left>Поскольку LZW-сжатие, используемое для GIF, создает серию
кодов переменной длины от 3 до 12 символов каждый, эти коды должны
быть переформированы в серию 8-битный байтов так, чтобы на самом
деле происходило запоминание или передача символов. Это
обеспечивает дополнительное сжатие изображения. Коды формируются в
поток битов так, как если бы они паковались справа налево, и затем
выбираются по 8 битов для вывода. Рассматриваемый массив 8-битных
символов при упаковке кодов длиной по 5 битов должен быть похож на
следующий пример:
<table border=0 cellpadding=10 cellspacing=0 width=100%>
<tr>
<th width=16%>байт n</th>
<th width=16%>байт 5</th>
<th width=17%>байт 4</th>
<th width=17%>байт 3</th>
<th width=17%>байт 2</th>
<th width=17%>байт 1</th>
</tr>
<tr>
<td width=16% style="border-style: solid" align=center>and so on</td>
<td width=16% style="border-style: solid" align=center>hhhhhggg</td>
<td width=17% style="border-style: solid" align=center>ggfffffe</td>
<td width=17% style="border-style: solid" align=center>eeeedddd</td>
<td width=17% style="border-style: solid" align=center>dcccccbb</td>
<td width=17% style="border-style: solid" align=center>bbbaaaaa</td>
</tr>
</table>
<p align=left> Заметьте, что механизм физической упаковки будет изменяться
по мере того, как изменяется число битов в коде
сжатия, но концептуально он остается тем же самым.</p>
<h3 align=left>Упаковка байтов</h3>
<p align=left>Как только байты созданы, они группируются в блоки для
вывода, причем каждому блоку предшествует
байт-счетчик со значением от 0 до 255. Блок с нулевым байтом-счетчиком заканчивает
поток данных для данного изображения. Эти блоки являются тем, что
выводится на самом деле в формате GIF. Такой формат блока
обеспечивает дополнительную эффективность за счет того, что
позволяет декодировщику считывать данные по мере
необходимости, читая сначала байт-счетчик, а затем пропуская сами данные об
изображении.</p>
<h1 align=left><a name="AppD"></a>Приложение D - Обработка нескольких
изображений</h1>
<p align=left> Поскольку поток данных GIF может содержать несколько
изображений, необходимо описать обработку и
высвечивание таких файлов. Поскольку дескриптор изображения допускает размещение
изображения в пределах логического экрана, можно определить
последовательность изображений, каждое из которых занимает часть
экрана, но их совокупность заполняет экран целиком. В подобных
ситуациях линии поведения при обработке изображений
состоит в следующем:</p>
<ol>
<li>
<p align=left>Не делать пауз между изображениями. Каждое обрабатывается сразу же, как только будет распознано декодировщиком.</li>
<li>
<p align=left>Каждое изображение переписывает любое другое изображение уже находящееся внутри его окна. Экран
очищается только в начале и в конце обработки GIF-изображений.
<a href="#GIF_Terminator"> См. обсуждение терминатора
GIF</a>.<br>
</li>
</ol>
</body>
</html>
