box: debian
build:
  steps:
    - script:
        name: Install Nasm
        code: apt-get update && apt-get install -y make nasm && rm -rf /var/lib/apt/lists/*
    - script:
        name: Compile OS
        code: make

deploy:
  steps:
    # Execute the s3sync deploy step, a step provided by wercker
    - s3sync:
        key_id: $AWS_ACCESS_KEY_ID
        key_secret: $AWS_SECRET_ACCESS_KEY
        bucket_url: $AWS_BUCKET_URL
        source_dir: bin/release/
  # notify slack on successful or failed deploys
  after-steps:
    - kobim/slack-post:
        url: $SLACK_URL
        channel: notifications
        username: werckerbot